(()=>{"use strict";const e=function(e){event.preventDefault();var t=e.getAttribute("href").substring(1);t.length&&document.getElementById(t).scrollIntoView({behavior:"smooth"})};var t,n,a,o,c,r,i,l,s,u,d,m,v,f,g,p,h,y;g=document.querySelector("#timer-hours"),p=document.querySelector("#timer-minutes"),h=document.querySelector("#timer-seconds"),y=setInterval((function(){var e,t,n,a=(e=(new Date("16 August 2021 07:00").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t}),o=function(e){return e<10?"0".concat(e):e};g.textContent=a.hours<0?"00":o(a.hours),p.textContent=a.minutes<0?"00":o(a.minutes),h.textContent=a.seconds<0?"00":o(a.seconds),a.timeRemaining<0&&clearInterval(y)}),1e3),m=document.querySelector("menu"),v=document.querySelector("main>a"),f=function(){return m.classList.toggle("active-menu")},document.addEventListener("click",(function(t){var n=t.target;if(!n.matches(".portfolio-btn, .dot")){if(t.target.closest("menu")||m.classList.remove("active-menu"),n.closest("a")===v)e(n.closest("a"));else if(t.target.classList.contains("close-btn"))t.preventDefault(),f();else if(t.target.closest("a")){if("#"===(n=t.target.closest("a")).getAttribute("href"))return void t.preventDefault();e(n),f()}t.target.closest("div")&&t.target.closest("div").classList.contains("menu")&&f()}})),s=document.querySelector(".popup"),u=document.querySelector(".popup-close"),d=function(){var e=document.querySelector(".popup-content");if(document.documentElement.clientWidth>=768){var t=40;requestAnimationFrame((function n(){if(-60===t)return s.style.display="none",cancelAnimationFrame(n),void(e.style.left="");t+=-5,e.style.left=t+"%",requestAnimationFrame(n)}))}else s.style.display="none";e.style.left=""},document.addEventListener("click",(function(e){e.target.matches(".popup-btn")&&function(){var e=document.querySelector(".popup-content");if(s.style.display="block",document.documentElement.clientWidth>=768){var t=-60;requestAnimationFrame((function n(){t<40&&(t+=5,e.style.left=t+"%",requestAnimationFrame(n))}))}}()})),u.addEventListener("click",d),s.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?d():(t=t.closest(".popup-content"))||d()})),r=document.querySelector(".service-header"),i=document.querySelectorAll(".service-header-tab"),l=document.querySelectorAll(".service-tab"),r.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&i.forEach((function(e,n){e===t&&function(e){for(var t=0;t<l.length;t++)e===t?(i[t].classList.add("active"),l[t].classList.remove("d-none")):(i[t].classList.remove("active"),l[t].classList.add("d-none"))}(n)}))})),function(){var e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),n=document.querySelector(".portfolio-dots");n.innerHTML="";for(var a=0;a<e.length;a++){var o=document.createElement("li");o.classList.add("dot"),n.append(o)}var c=document.querySelectorAll(".dot");c[0].classList.add("dot-active");var r,i=0,l=function(e,t,n){e[t].classList.remove(n)},s=function(e,t,n){e[t].classList.add(n)},u=function(){l(e,i,"portfolio-item-active"),l(c,i,"dot-active"),++i>=e.length&&(i=0),s(e,i,"portfolio-item-active"),s(c,i,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;r=setInterval(u,e)};t.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".dot, .portfolio-btn")&&(l(e,i,"portfolio-item-active"),l(c,i,"dot-active"),n.matches("#arrow-right")?i++:n.matches("#arrow-left")?i--:n.matches(".dot")&&c.forEach((function(e,t){e===n&&(i=t)})),i>=e.length&&(i=0),i<0&&(i=e.length-1),s(e,i,"portfolio-item-active"),s(c,i,"dot-active"))})),t.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(r)})),t.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d()})),d(1500)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),o=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),r=document.getElementById("total");function i(t){var n=0,a=setInterval((function(){(n+=Math.ceil(t/e))>=t&&clearInterval(a),r.textContent=n}),1)}var l=function(){var t=1,r=1,l=n.options[n.selectedIndex].value,s=+a.value;c.value>1&&(t+=(c.value-1)/10),o.value&&o.value<5?r*=2:o.value&&o.value<10&&(r*=1.5),l&&s&&i(e*l*s*r*t)};t.addEventListener("change",(function(e){var t=e.target;(t.matches(".calc-type")||t.matches(".calc-square")||t.matches(".calc-day")||t.matches(".calc-count"))&&l()}))}(100),(c=document.createElement("div")).style.cssText="\n  font-size: 2rem;\n  color: aquamarine;\n  ",document.addEventListener("submit",(function(e){var t=e.target;e.preventDefault(),t.appendChild(c),c.textContent="Загрузка...";var n=new FormData(t),a={};n.forEach((function(e,t){a[t]=e})),t.reset(),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(a).then((function(e){if(200!==e.status)throw new Error("status network not 200");c.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(e){c.textContent="Что то пошло не так...",console.error(e)}))})),(o=document.getElementById("command")).addEventListener("mouseover",(function(e){if(e.target.matches("img")){var t=[e.target.src,e.target.dataset.img];e.target.dataset.img=t[0],e.target.src=t[1]}})),o.addEventListener("mouseout",(function(e){if(e.target.matches("img")){var t=[e.target.dataset.img,e.target.src];e.target.src=t[0],e.target.dataset.img=t[1]}})),t=/номер телефона/gi,n=/e-mail/gi,a=/имя/gi,document.addEventListener("input",(function(e){var o=e.target;o.matches(".calc-block>input")&&(o.value=o.value.replace(/\D/g,"")),t.test(o.placeholder)&&(o.value=o.value.replace(/[^\d\+]/g,"")),o.matches(".mess")&&(o.value=o.value.replace(/[^\.:,\!\?\-\s\dа-яё]/gi,"")),a.test(o.placeholder)&&(o.value=o.value.replace(/[^\sа-яё]/gi,"")),n.test(o.placeholder)&&(o.value=o.value.replace(/[^\w@\-.!~*']/gi,""))})),document.addEventListener("blur",(function(e){var t=e.target;if(t.matches("input")&&(t.value=t.value.trim().replace(/^-*/g,"").replace(/-*$/g,"").replace(/-+/g,"-").replace(/\s+/g," "),a.test(t.placeholder)&t.value.length>0)){var n=t.value.split(" ");n=n.reduce((function(e,t){return e+t[0].toUpperCase()+t.substring(1).toLowerCase()+" "}),""),t.value=n.trim()}}),!0)})();